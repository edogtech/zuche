<extend name="Public/base" />
<block name="title">轮播图列表</block>
<block name="content">
	<div class="row">
		<form method="get" action="{:U('Carousel/index')}">
			<div class="col-md-3">
				<div class="form-group">
					标题:
					<input class="form-control" style="display:inline;width:70%;" type="text" name="caption" id="caption" value="{:isset($_GET['caption'])?$_GET['caption']:'';}"></div>
			</div>		
			<div class="col-md-6">
				添加时间：<input style="display:inline;width:35%;height:34px;" placeholder="请选择日期" class="laydate-icon form-control" name="dtpickerA" value="{:isset($_GET['dtpickerA'])?$_GET['dtpickerA']:'';}" onclick="laydate()"> 至 <input placeholder="请选择日期" class="laydate-icon form-control" name="dtpickerB" value="{:isset($_GET['dtpickerB'])?$_GET['dtpickerB']:'';}" onclick="laydate()" style="display:inline;width:35%;height:34px;">
			</div> 
			<div class="col-md-3">
				<div class="form-group">
					<button type="submit" class="btn btn-primary" style="margin-right:30px;"> <i class="fa fa-search"></i>
						查询
					</button>
					<button type="button" class="btn btn-primary" id="addCarousel" data-toggle="modal" data-target="#CarouselAddModal"> <i class="glyphicon glyphicon-plus"></i>
						添加
					</button> 

				</div>
			</div>
		</form>
	</div>
	<div class="row">	
		<!-- /.panel-heading -->
		<div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">轮播图列表</div>
		<div class="panel-body">
			<div class="table-responsive">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>编号</th>
							<th>标题</th>
							<th>图片</th>
							<th>第三方链接</th>
							<th>简介</th>									
							<!-- <th>类型</th> -->									
							<th>添加时间</th>
							<th class="text-center">操作</th>
						</tr>
					</thead>
					<tbody>
						<volist name="lists" id="vo">
						<tr>
							<td>{$vo['id']}</td>
							<td>{$vo['name']}</td>
							<td><img  class="img-responsive"  src="__ROOT__{$vo['image']}" style="width:50px;height:30px;margin:0 auto;"/></td>
							<td>{$vo['url']}</td>
							<td>{$vo['summary']}</td>
							<!-- <td>
								<eq name="vo['type']" value="0">--<else/>外链</eq>
							</td> -->								
							<td>{$vo['add_time']|date='Y-m-d',###}</td>								
							<td align="center">
								<a href="#" data-toggle="modal" data-target="#CarouselDelModal" data-id="{$vo['id']}">删除</a>
								<a href="#" data-toggle="modal" data-target="#CarouselEditModal"
								 data-id="{$vo['id']}"
								 data-caption="{$vo['name']}"
								 data-url="{$vo['url']}"
								 data-summary="{$vo['summary']}"
								 data-image="__ROOT__{$vo['image']}">编辑</a>
							</td>
						</tr>
						</volist>
					</tbody>
				</table>
				<if condition="empty($lists)">
					<div style="text-align:center;">抱歉，暂时没有您要找的内容</div>
				</if>
			</div>
		</div>
	</div>
	</div>
	<!-- 分页内容 -->
	<div class="col-md-12">{$show}</div>
	</div>
	
	<!-- 模态框（Modal） 添加轮播图-->
	<div class="modal fade" id="CarouselAddModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" enctype="multipart/form-data" action="{:U('Carousel/add')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">添加轮播图</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>标题：</label>
							<input type="text" id="txtCaptionCarousel" name="txtCaption">
						</div>
						<div class="form-group">
							<label>URL：</label>
							<input type="text" id="txtCaptionCarousel" name="txtUrl">
						</div>							
                        <div class="form-group" >
                            <label>简介：</label>
                            <textarea  rows="3" cols="50" style="vertical-align:top;resize: none;" name="txtSummary"></textarea>
                        </div>					
						<div class="form-group">
							<label>图片：</label>
							<input type="file" id="fileImgCarouselAdd" name="imgUrl">
						</div>
						<div class="form-group">							
							<!-- <label>预览：</label> -->
							<img id="ImgPrAdd" class="img-responsive" style="width:80px;height:70px;margin-left:50px;"/>
						</div>

					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->
	
	<!--  模态框（Modal） 删除轮播图 -->
	<div class="modal fade" id="CarouselDelModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" action="{:U('Carousel/del')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">删除轮播图</h4>
					</div>
					<div class="modal-body">
						
						<div class="form-group">							
							<p  class="text-warning" style="text-align:center;font-size:20px;">确定删除吗？</p>
						</div>

					</div>
					<div class="modal-footer">
						<input class="form-control" type="hidden" name="id" id="delCarouselId"  />
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->
	
	<!-- 模态框（Modal） 编辑轮播图-->
	<div class="modal fade" id="CarouselEditModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" enctype="multipart/form-data" action="{:U('Carousel/edit')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">编辑轮播图</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>标题：</label>
							<input type="text" id="txtCaptionCarousel" name="txtCaption">
						</div>
						<div class="form-group">
							<label>URL：</label>
							<input type="text" id="txtUrlCarousel" name="txtUrl">
						</div>							
                        <div class="form-group" >
                            <label>简介：</label>
                            <textarea  rows="3" cols="50" style="vertical-align:top;resize: none;" id="txtSummaryCarousel" name="txtSummary"></textarea>
                        </div>					
						<div class="form-group">
							<label>原图：</label>
							<img  class="img-responsive"  id="ImgPreCarousel"  src="" style="width:150px;height:80px;margin-left:50px;"/><br>
							<input type="file" id="fileImgCarouselEdit" name="imgUrl">
						</div>
						<div class="form-group">
							<!-- <label>预览：</label> -->
							<img id="ImgPrEdit" class="img-responsive" style="width:150px;height:80px;margin-left:50px;"/>
						</div>

					</div>
					<div class="modal-footer">
						<input class="form-control" type="hidden" name="id" id="editCarouselId"  />
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->	
	
</block>