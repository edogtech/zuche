<extend name="Public/base" />
<block name="title">系统用户列表</block>
<block name="content">
	<div class="row">
		<form method="get" action="{:U('AdminUser/index')}">
			<div class="col-md-3">
				<div class="form-group">
					昵称:
					<input style="width:70%;display:inline;" class="form-control" type="text" name="nickname" id="caption" value="{:isset($_GET['nickname'])?$_GET['nickname']:'';}">
				</div>
			</div>		
			<!-- <div style="display:inline;">
				添加时间：<input placeholder="请选择日期" class="laydate-icon" name="dtpickerA" value="{:isset($_GET['dtpickerA'])?$_GET['dtpickerA']:'';}" onclick="laydate()"> 至 <input placeholder="请选择日期" class="laydate-icon" name="dtpickerB" value="{:isset($_GET['dtpickerB'])?$_GET['dtpickerB']:'';}" onclick="laydate()">
			</div>  -->
			<div class="col-md-3">
				<div class="form-group">
						手机号码:
						<input style="width:70%;display:inline;" class="form-control" type="text" name="phone" id="phone" value="{:isset($_GET['phone'])?$_GET['phone']:'';}">
				</div>
			</div>
			<div class="col-md-3 col-md-offset-3">
				<div class="form-group">
					<button type="submit" class="btn btn-primary" style="margin-right:30px;"> <i class="fa fa-search"></i>
						查询
					</button>
					<button type="button" class="btn btn-primary" id="addAdminUser" data-toggle="modal" data-target="#AdminUserAddModal"> <i class="glyphicon glyphicon-plus"></i>
						添加
					</button> 

				</div>
			</div>
		</form>
	</div>
	<div class="row">	
		<!-- /.panel-heading -->
		<div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">系统用户列表</div>
		<div class="panel-body">
			<div class="table-responsive">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>编号</th>
							<th>角色</th>
							<th>昵称</th>
							<th>手机号</th>
							<th>上次登录时间</th>
							<th>上次登录IP</th>							
							<th>登录次数</th>									
							<th>账户状态</th>
							<th>添加时间</th>
							<th class="text-center">操作</th>
						</tr>
					</thead>
					<tbody>
						<volist name="lists" id="vo">
						<tr>
							<td>{$vo['id']}</td>
							<td>{$vo['role']}</td>
							<td>{$vo['nickname']}</td>
							<td>{$vo['phone']}</td>
							<td>{:date('Y-m-d H:i:s',$vo['last_login_time'])}</td>
							<td>{$vo['last_login_ip']}</td>
							<td>{$vo['login_count']}</td>
							<td>{$vo['locked']}</td>
							<td>{$vo['add_time']|date='Y-m-d H:i:s',###}</td>							
							<td align="center">
								<a href="#" data-toggle="modal" data-target="#AdminUserDelModal" data-id="{$vo['id']}">删除</a>
								<a href="#" data-toggle="modal" data-target="#AdminUserEditModal"
								 data-id="{$vo['id']}"
								 data-role="{$vo['role']}"
								 data-nickname="{$vo['nickname']}"
								 data-password="{$vo['password']}"
								 data-phone="{$vo['phone']}"
								 data-email="{$vo['email']}"
								 data-status="{$vo['status']}"
								 data-memo="{$vo['memo']}"
								 >编辑</a>
							</td>
						</tr>
						</volist>
					</tbody>
				</table>
				<if condition="empty($lists)">
					<div style="text-align:center;">抱歉，暂时没有您要找的内容</div>
				</if>
			</div>
		</div>
	</div>
	</div>
	<!-- 分页内容 -->
	<div class="col-md-12">{$show}</div>
	</div>
	
	<!-- 模态框（Modal） 添加系统用户-->
	<div class="modal fade" id="AdminUserAddModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" action="{:U('AdminUser/add')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">添加系统用户</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>角色：</label>
							<select class="form-control" name="selRole" id="selRole">
								<option value="Admin" {:$_GET['selStatus']=='0'?"selected":'';} >管理员</option>
								<option value="Member" {:$_GET['selStatus']=='1'?"selected":'';} >普通用户</option>
							</select>
						</div>
						<div class="form-group">
							<label>昵称：</label>
							<input type="text" id="txtNickname" name="txtNickname" class="form-control">
						</div>		
						<div class="form-group">
							<label>密码：</label>
							<input type="password" id="txtPwd" name="txtPwd" class="form-control">
						</div>
						<div class="form-group">
							<label>确认密码：</label>
							<input type="password" id="txtPwdConfirm" name="txtPwdConfirm" class="form-control">
						</div>						
						<div class="form-group">
							<label>手机：</label>
							<input type="text" id="txtPhone" name="txtPhone" class="form-control">
						</div>	
						<div class="form-group">
							<label>邮箱：</label>
							<input type="text" id="txtEmail" name="txtEmail" class="form-control">
						</div>
						<div class="form-group">
							<label>状态：</label>
							<select class="form-control"  name="selStatus" id="selStatus">
								<option value="0" {:$_GET['selStatus']=='0'?"selected":'';} >启用</option>
								<option value="1" {:$_GET['selStatus']=='1'?"selected":'';} >锁定</option>
							</select>
						</div>																								
                        <div class="form-group" >
                            <label>备注：</label>
                            <textarea  rows="3" cols="50" class="form-control" id="txtMemo" name="txtMemo"></textarea>
                        </div>					

						<div class="form-group">
							<!-- <label>预览：</label> -->
							<img id="ImgPrAdd" class="img-responsive" style="width:80px;height:70px;margin-left:50px;"/>
						</div>

					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->
	
	<!--  模态框（Modal） 删除系统用户 -->
	<div class="modal fade" id="AdminUserDelModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" action="{:U('AdminUser/del')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">删除系统用户</h4>
					</div>
					<div class="modal-body">
						
						<div class="form-group">							
							<p  class="text-warning" style="text-align:center;font-size:20px;">确定删除吗？</p>
						</div>

					</div>
					<div class="modal-footer">
						<input class="form-control" type="hidden" name="id" id="delAdminUserId"  />
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->
	
	<!-- 模态框（Modal） 编辑轮播图-->
	<div class="modal fade" id="AdminUserEditModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<form method="post" enctype="multipart/form-data" action="{:U('AdminUser/edit')}">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">编辑系统用户</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>角色：</label>
							<select style="display:inline;width:80px;height:28px;font-size:12px;"  name="selRole" id="selRole">
								<option value="Admin" {:$_GET['selStatus']=='0'?"selected":'';} >管理员</option>
								<option value="Member" {:$_GET['selStatus']=='1'?"selected":'';} >普通用户</option>
							</select>
						</div>
						<div class="form-group">
							<label>昵称：</label>
							<input type="text" id="txtNickname" name="txtNickname">
						</div>		
						<div class="form-group">
							<label>密码：</label>
							<input type="password" id="txtPwd" name="txtPwd">
						</div>
						<div class="form-group">
							<label>确认密码：</label>
							<input type="password" id="txtPwd2" name="txtPwd2">
						</div>						
						<div class="form-group">
							<label>手机：</label>
							<input type="text" id="txtPhone" name="txtPhone">
						</div>	
						<div class="form-group">
							<label>邮箱：</label>
							<input type="text" id="txtEmail" name="txtEmail">
						</div>
						<div class="form-group">
							<label>状态：</label>
							<select style="display:inline;width:80px;height:28px;font-size:12px;"  name="selStatus" id="selStatus">
								<option value="0" {:$_GET['selStatus']=='0'?"selected":'';} >启用</option>
								<option value="1" {:$_GET['selStatus']=='1'?"selected":'';} >锁定</option>
							</select>
						</div>																								
                        <div class="form-group" >
                            <label>备注：</label>
                            <textarea  rows="3" cols="50" style="vertical-align:top;resize: none;" id="txtMemo" name="txtMemo"></textarea>
                        </div>
					</div>
					<div class="modal-footer">
						<input class="form-control" type="hidden" name="id" id="id"  />
						<button type="submit" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" >取消</button>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</form>
	</div>
	<!-- /.modal -->	
	
</block>